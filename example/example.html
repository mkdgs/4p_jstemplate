// need jquery & 4p template libs

<div id="template">    
    https//github.com/mkdgs/4p_jstemplate/
    <br/>
    <br/>
    <b>short print: {{=data.is('bar').v() }} </b><br/>
    <b>traverse data tree: {{=data.is('deep','foo','bar').v() }} </b>
    <br/>
    <h1>iterate loop</h1>
    <ul>
        <script> 
        while ( l = data.is('list').iterate() ) {
            print('<li> '+l.v()+' </li>');           
        } 
        </script>
    </ul>
    
   
    break code d√©claration
    <h1>iterate loop</h1>
    <button id="add">add item</button>
    <ul>
        <script> while ( loopdata = data.is('list').iterate() ) { </script>
            <li id="{{=loopdata.v()}}" data-fp-scope="scoped-part"> some html  code ...
              {{=loopdata.v()}}
            </li>           
        <script> } </script>        
    </ul>
    
    <br />
    
    <h1>Alternative syntaxe</h1>
    <ul>
        {{ while ( l = data.is('list').iterate() ) { }}
        <li>
              {{=l.v()}}  
        </li>        
        {{ } }}
    </ul>
<div>

<script>

$(function(){
    var template_data = {
        bar : 'youpi',
        deep : { 'foo' : { 'bar' : 'data' } },
        list : [ 'hop', 'hip', 'hap', 'yip' , 'yep']
    };

    $(function () {
        var my_tpl = $4p.tpl($('#template').html());
        $('#template').html(my_tpl.render(template_data));
    
        $(document).on('click', '#add', function () {
            $('[data-fp-scope=scoped-part]').first().before(my_tpl.render('awesome data !', 'scoped-part', 'loopdata'));
        });
    });
});
</script>
